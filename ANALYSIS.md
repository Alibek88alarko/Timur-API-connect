# üìã –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ Timur-API-connect

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –•–æ—Ä–æ—à–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ Al-Style** - –†–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ (250 —Ç–æ–≤–∞—Ä–æ–≤)
3. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è XML** - –°–æ–∑–¥–∞–µ—Ç –≤–∞–ª–∏–¥–Ω—ã–π XML –¥–ª—è Kaspi.kz
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è XML —Å—Ç—Ä—É–∫—Ç—É—Ä—ã** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
5. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## ‚ùå –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

### 1. **Kaspi API –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω**
- –í—Å–µ URL –¥–∞—é—Ç timeout: `https://kaspi.kz/shop/api/v2`, `https://merchant.kaspi.kz/api/v2`
- –¢–æ–∫–µ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º, –Ω–æ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –í–æ–∑–º–æ–∂–Ω–æ, –Ω—É–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å API –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–∞–±–∏–Ω–µ—Ç–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞

### 2. **–°—Ö–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ XML –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞**
- URL `http://kaspi.kz/kaspishopping.xsd` –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (timeout)
- XML —Å–æ–∑–¥–∞–µ—Ç—Å—è, –Ω–æ –Ω–µ–ª—å–∑—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ö–µ–º–µ
- –ù—É–∂–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–ø–∏—è —Å—Ö–µ–º—ã

### 3. **–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑—ã**
- –ë–µ–∑ –¥–æ—Å—Ç—É–ø–∞ –∫ Kaspi API –Ω–µ–ª—å–∑—è –ø–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑—ã
- –ù–µ–ª—å–∑—è –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤
- –ù–µ–ª—å–∑—è –∑–∞–≥—Ä—É–∑–∏—Ç—å XML —Ñ–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 4. **–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã**
- –ù–µ—Ç —Ñ–∞–π–ª–∞ `.env` (—Ç–æ–ª—å–∫–æ `.env.example`)
- –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω

## üîß –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### 1. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
```python
def process_kaspi_orders():
    try:
        response = requests.get(...)
        if response.status_code != 200:
            logging.error(f'–û—à–∏–±–∫–∞: {response.status_code} - {response.text}')
            return
    except requests.exceptions.RequestException as e:
        logging.error(f'–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: {e}')
        return
```

### 2. **–§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ XML**
```python
def upload_xml_to_kaspi(xml_file_path):
    # –ó–∞–≥—Ä—É–∂–∞–µ—Ç XML —Ñ–∞–π–ª –≤ Kaspi.kz —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API
```

### 3. **–¢–µ—Å—Ç–æ–≤—ã–µ —Ä–µ–∂–∏–º—ã**
```bash
python Script.py test-orders    # –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
python Script.py test-products  # –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ 
python Script.py test-xml       # –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é XML
python Script.py upload-xml     # –ó–∞–≥—Ä—É–∂–∞–µ—Ç XML –≤ Kaspi.kz
```

### 4. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è XML**
- –£—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –∏—â–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã

## üöÄ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ:

### 1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω—ã**
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç–æ–∫–µ–Ω Kaspi.kz –≤–∞–ª–∏–¥–µ–Ω
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ API

### 2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ URL**
- –ù–∞–π—Ç–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã Kaspi.kz API
- –í–æ–∑–º–æ–∂–Ω–æ, –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –±–∞–∑–æ–≤—ã–π URL

### 3. **–õ–æ–∫–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ XML**
- –°–∫–∞—á–∞—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ö–µ–º—É `kaspishopping.xsd` –ª–æ–∫–∞–ª—å–Ω–æ
- –û–±–Ω–æ–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ç–æ—Ä –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Å—Ö–µ–º—ã

### 4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã –≤ Kaspi.kz
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É XML —Ñ–∞–π–ª–æ–≤
- –£–±–µ–¥–∏—Ç—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã API

### 5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
- –î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–∞—Ö
- –°–æ–∑–¥–∞—Ç—å –¥–∞—à–±–æ—Ä–¥ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è):

```
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ al_style.py      # API –¥–ª—è Al-Style
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kaspi.py         # API –¥–ª—è Kaspi.kz
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ validators/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ xml_validator.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ test_api.py
‚îÇ   ‚îú‚îÄ‚îÄ test_validators.py
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îî‚îÄ‚îÄ kaspishopping.xsd    # –õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–ø–∏—è —Å—Ö–µ–º—ã
‚îú‚îÄ‚îÄ logs/
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
```

## üìà –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - Flask/FastAPI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
2. **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á** - Cron/Celery –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - SQLite –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
4. **Docker** - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
5. **CI/CD** - GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

1. **–†–æ—Ç–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤** - –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
2. **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** - –ó–∞—â–∏—Ç–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. **–õ–∏–º–∏—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤** - –°–æ–±–ª—é–¥–µ–Ω–∏–µ API limits
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π

## üìû –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–º–æ—â–∏:

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Kaspi.kz
2. –°–≤—è–∑–∞—Ç—å—Å—è —Å —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Kaspi.kz
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä—É–º—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API (Postman, curl)
