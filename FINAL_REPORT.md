# üéØ –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç: –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Ç–æ–∫–µ–Ω–∞–º–∏:

### ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ:**
- **Al-Style API**: 200 —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ–ª—É—á–µ–Ω–æ –∑–∞ 6 —Å–µ–∫—É–Ω–¥
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è XML**: –°–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π XML —Ñ–∞–π–ª
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ XML**: –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### ‚ùå **–ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- **Kaspi API**: Timeout –Ω–∞ –≤—Å–µ—Ö URL (4 —Ä–∞–∑–Ω—ã—Ö URL –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã)
- **–°—Ö–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**: Timeout –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å kaspi.kz
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ XML**: –ù–µ–≤–æ–∑–º–æ–∂–Ω–∞ –±–µ–∑ API

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–Ω—É–∂–Ω–æ —Ä–µ—à–∏—Ç—å –°–ï–ô–ß–ê–°):

### 1. **Kaspi API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω**
**–ü—Ä–æ–±–ª–µ–º–∞**: –í—Å–µ URL –¥–∞—é—Ç timeout
**–†–µ—à–µ–Ω–∏–µ**: 
- –ó–∞–π—Ç–∏ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç Kaspi.kz
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ API –≤–∫–ª—é—á–µ–Ω –¥–ª—è –≤–∞—à–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
- –°–≤—è–∑–∞—Ç—å—Å—è —Å —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Kaspi: 2323

### 2. **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—Ö–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**
**–ü—Ä–æ–±–ª–µ–º–∞**: kaspishopping.xsd –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
**–†–µ—à–µ–Ω–∏–µ**: 
- –°–∫–∞—á–∞—Ç—å —Å—Ö–µ–º—É –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Kaspi
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –≤ –ø–∞–ø–∫–µ `schemas/`
- –û–±–Ω–æ–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ç–æ—Ä –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Å—Ö–µ–º—ã

## üîß –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏:

### 1. **–û–±—Ö–æ–¥–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤**
```python
# –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —Ä—É—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ XML
def save_xml_for_manual_upload():
    """–°–æ—Ö—Ä–∞–Ω—è–µ—Ç XML —Å timestamp –¥–ª—è —Ä—É—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏"""
    timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
    filename = f"kaspi_upload_{timestamp}.xml"
    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å XML —Ñ–∞–π–ª
    print(f"XML —Å–æ—Ö—Ä–∞–Ω–µ–Ω: {filename}")
    print("–ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤—Ä—É—á–Ω—É—é –≤ –∫–∞–±–∏–Ω–µ—Ç–µ Kaspi.kz")
```

### 2. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤**
```python
# –ï—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –º–æ–∂–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫–∞–∑—ã –∏–∑ –∫–∞–±–∏–Ω–µ—Ç–∞
def process_exported_orders(csv_file):
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–∫–∞–∑—ã –∏–∑ CSV —ç–∫—Å–ø–æ—Ä—Ç–∞"""
    # –ß–∏—Ç–∞–µ—Ç CSV —Ñ–∞–π–ª –∑–∞–∫–∞–∑–æ–≤
    # –û–±–Ω–æ–≤–ª—è–µ—Ç –æ—Å—Ç–∞—Ç–∫–∏ –≤ Al-Style
```

### 3. **–õ–æ–∫–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**
```python
# –î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é —Å—Ö–µ–º—É
SCHEMA_PATH = "schemas/kaspishopping.xsd"
if os.path.exists(SCHEMA_PATH):
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é —Å—Ö–µ–º—É
else:
    # –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Å—Ö–µ–º—ã
```

### 4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API**
```python
def check_kaspi_api_health():
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Kaspi API –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç"""
    # Ping API endpoints
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –∫–æ–≥–¥–∞ API —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º
```

## üìã –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º:

### üî• **–°–µ–≥–æ–¥–Ω—è (–∫—Ä–∏—Ç–∏—á–Ω–æ):**
1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API** –≤ –∫–∞–±–∏–Ω–µ—Ç–µ Kaspi.kz
2. **–°–≤—è–∑–∞—Ç—å—Å—è —Å —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π** Kaspi –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ API
3. **–°–∫–∞—á–∞—Ç—å —Å—Ö–µ–º—É** kaspishopping.xsd –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### ‚ö†Ô∏è **–ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ:**
4. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä—É—á–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É** XML —Ñ–∞–π–ª–æ–≤
5. **–î–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –∑–∞–∫–∞–∑–æ–≤** —á–µ—Ä–µ–∑ CSV
6. **–°–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ XML

### üìà **–í —Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö:**
7. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
8. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ —Å—Ç–∞—Ç—É—Å–∞—Ö
9. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** –ø—Ä–æ–¥–∞–∂

## üí° –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:

**–ü–æ–∫–∞ Kaspi API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –ø—Ä–æ–µ–∫—Ç –º–æ–∂–µ—Ç:**
1. ‚úÖ –ü–æ–ª—É—á–∞—Ç—å —Ç–æ–≤–∞—Ä—ã –∏–∑ Al-Style
2. ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å XML —Ñ–∞–π–ª—ã
3. ‚úÖ –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É XML
4. ‚úÖ –°–æ—Ö—Ä–∞–Ω—è—Ç—å XML –¥–ª—è —Ä—É—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –≤ Kaspi.kz

**–ß–µ–≥–æ –ù–ï —Ö–≤–∞—Ç–∞–µ—Ç:**
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤
- ‚ùå –û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫–∞–∑–æ–≤

## üéØ –í—ã–≤–æ–¥:

**–ü—Ä–æ–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 70%** - –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –µ—Å—Ç—å, –Ω–æ –Ω—É–∂–Ω–æ —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å Kaspi API. –≠—Ç–æ **–ù–ï –æ—à–∏–±–∫–∞ –∫–æ–¥–∞**, –∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é —Å–µ—Ä–≤–∏—Å–∞ Kaspi.kz.

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:**
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ XML —Ñ–∞–π–ª–æ–≤
2. –ó–∞–≥—Ä—É–∂–∞—Ç—å XML –≤—Ä—É—á–Ω—É—é –≤ Kaspi.kz
3. –†–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å API —á–µ—Ä–µ–∑ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫—É
4. –ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è API - –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
